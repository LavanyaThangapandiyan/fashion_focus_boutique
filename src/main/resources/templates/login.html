<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org" xml:lang="en">
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"
	type="text/css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

<head>
	<meta charset="ISO-8859-1">
	<title>Login</title>
</head>

<body>
	<header>
		<nav class="navbar navbar-expand-md navbar-dark" style="background-color: purple">
			<img alt="" src="https://t3.ftcdn.net/jpg/02/94/87/50/360_F_294875066_WmW95xUPQ4R51in63vIcKogyq1LX8ROV.jpg"
				class="logo" />
			<div>

				<a href="" class="navbar-brand">Fashion Focus Boutique</a>
				<a th:href="@{/register}" class="navbar-brand">Sign Up</a>
			</div>
		</nav>
	</header>
	<div class="container">
		<form id="form" action="#" th:action="@{/loginsubmit}" th:object="${user}" method="POST">
			<!-- class named "container" is assigned to div -->
			<div class="input-group">
				<h1>Welcome</h1>
				<div>
					<p id="error" th:text="${invalid}"></p>
					<span id="replace_target"></span>
				</div>
				<br>
				<div class="input-group">
					<label for="username"><b>Email</b></label>
					<input type="text" pattern="^(.+)@(.+)$" id="email" placeholder="Enter Email" name="email" required>
					<div class="error"></div>
				</div>

				<div class="input-group">
					<label><b>Password</b></label>
					<input type="password" id="password" placeholder="Enter Password" pattern=".{8,}" name="password"
						required>
					<div class="error"></div>
				</div>
				<button type="submit">Login</button>
				<br>
				<button type="submit"><a th:href="@{/}">Cancel</a></button>
			</div>
			<div>
				<p> <a th:href="@{/forgot}" class="navbar-brand">Forgot Password ?</a>.</p>
			</div>
			<div>
				<p>Create your account? <a th:href="@{/register}" class="navbar-brand">Sign up</a>.</p>
			</div>
		</form>
	</div>
	<script>
		const form = document.querySelector('#form')
		const email = document.querySelector('#email')
		const password = document.querySelector('#password')
		form.addEventListener('submit', (e) => {
			if (!validateInputs()) {
				e.preventDefault();
			}
		})
		function validateInputs() {
			const emailVal = email.value.trim();
			const passwordVal = password.value.trim();
			let success = true
			if (emailVal === '') {
				success = false;
				setError(email, 'Email is required')
			}
			else if (!validateEmail(emailVal)) {
				success = false;
				setError(email, 'Please enter a valid email')
			}
			else {
				setSuccess(email)
			}
			function setError(element, message) {
				const inputGroup = element.parentElement;
				const errorElement = inputGroup.querySelector('.error')

				errorElement.innerText = message;
				inputGroup.classList.add('error')
				inputGroup.classList.remove('success')
			}

			function setSuccess(element) {
				const inputGroup = element.parentElement;
				const errorElement = inputGroup.querySelector('.error')

				errorElement.innerText = '';
				inputGroup.classList.add('success')
				inputGroup.classList.remove('error')
			}
			const validateEmail = (email) => {
				return String(email)
					.toLowerCase()
					.match(/^\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b$/);
			};
		}
	</script>
	<style>
		body {
			background: url(https://img.freepik.com/premium-photo/female-hand-holding-placard-with-open-sign-clothes-shop_249974-3699.jpg) no-repeat center center fixed;
			background-size: cover;
		}


		#error {
			text-align: center;
			color: red;
			text-indent: 30px;
		}

		.logo {
			max-width: 70px;
		}

		#form {
		    font-family: 'Poppins', sans-serif;
			height: 650px;
			border-radius: 15px;
			padding: 30px;
			margin: 20vh auto 0 auto;
			margin-top: 20px;
			background: #3c5077;
			box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.6);
			padding-left: 20px;
			padding-right: -40px;
			width: 500px;
			background-color: whitesmoke;

		}

		h1 {
			text-align: center;
			color: #792099;
		}

		#form button {
			background-color: #792099;
			color: white;
			border: 1px solid #792099;
			border-radius: 5px;
			padding: 10px;
			margin: 10px 0px;
			cursor: pointer;
			font-size: 20px;
			width: 100%;
		}

		.input-group {
			display: flex;
			flex-direction: column;
			margin-bottom: 15px;
		}

		.input-group input {
			border-radius: 5px;
			font-size: 20px;
			margin-top: 5px;
			padding: 10px;
			border: 1px solid rgb(34, 193, 195);
		}

		.input-group input:focus {
			outline: 0;
		}

		.input-group .error {
			color: rgb(242, 18, 18);
			font-size: 16px;
			margin-top: 5px;
		}

		.input-group.success input {
			border-color: #0cc477;
		}

		.input-group.error input {
			border-color: rgb(206, 67, 67);
		}
	</style>
</body>
<br><br><br>
<br><br><br><br><br>
<footer>
	<div class="jumbotron text-center" style="margin-bottom:0">
		<p class=""> Made with love by fashionfocusboutique@s26.</p>
	</div>
</footer>

</html>